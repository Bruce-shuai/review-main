## What is HTTPS

超文本传输协议安全 `(HTTPS)` 是 `HTTP` 的安全版本，`HTTP` 是用于在 `Web` 浏览器和网站之间发送数据的主要协议。`HTTPS` 经过加密，以提高数据传输的安全性。当用户**传输敏感数据**（例如通过登录银行账户、电子邮件服务或健康保险提供商）时，这一点尤其重要。

任何网站都应该使用`HTTPS`，尤其是那些需要登录凭证的网站。在现代 `Web` 浏览器（例如 `Chrome`）中，未使用 `HTTPS` 的网站与使用 `HTTPS` 的网站的标记有所不同。`URL` 栏中如出现挂锁，则表示该网页是安全的。

## How To Work?

`HTTPS` 使用加密协议对通信进行加密。该协议称为传输层安全性 (`TLS`)，但以前称为安全套接字层 (`SSL`)。该协议通过使用所谓的**非对称公钥基础架构**来保护通信。这种类型的安全系统使用两个不同的密钥来加密两方之间的通信：

1. 私钥 - 此密钥由网站所有者控制，并且如读者所推测的那样，它是私有的。此密钥位于 `Web` 服务器上，用于解密通过公钥加密的信息。
2. 公钥 - 所有想要以安全方式与服务器交互的人都可以使用此密钥。用公钥加密的信息只能用私钥解密。

## why HTTPS so important?

HTTPS 阻止网站以任何在网络上窥探的人都能轻松查看的方式广播信息。通过常规 HTTP 发送信息时，信息会分解为数据包，使用免费软件即可轻松“嗅探”这些数据包。这使得通过不安全的媒介（例如公共 Wi-Fi）进行的通信极易受到拦截。实际上，所有通过 HTTP 进行的通信都是以纯文本形式进行的，因而能够为任何使用正确工具的人轻松访问，而且容易遭受在途攻击。

使用 HTTPS 时，流量会经过加密，即使嗅探到数据包或以其他方式截取数据包，它们也会呈现为无意义的字符。我们来看一个例子：

**加密前：**

```bash
这是完全可读的文本字符串
```

**加密后：**

```bash
ITM0IRyiEhVpa6VnKyExMiEgNveroyWBPlgGyfkflYjDaaFf/Kn3bo3OfghBPDWo6AfSHlNtL8N7ITEwIXc1gU5X73xMsJormzzXlwOyrCs+9XCPk63Y+z0=
```

### 陌生人将广告植入你的网站

在不使用 `HTTPS` 的网站中，`Internet` 服务提供商（`ISP`）或其他中间人有可以在未经网站所有者批准的情况下将内容注入网页。这通常采用广告形式，希望增加收入的 `ISP` 将付费广告注入其客户的网页中。毋庸置疑，当这种情况发生时，绝不会与网站所有者共享广告的利润和这些广告的质量控制。`HTTPS` 杜绝了未经审核的第三方将广告注入 `Web` 内容的可能。

## difference between HTTP and HTTPS

```bash
HTTPS = HTTP + TLS/SSL
```

`HTTPS` 基于 `TLS/SSL` 证书的传输而发生，该证书验证特定提供商就是他们声称的身份。

当用户连接网页时，该网页将通过其 `SSL` 证书发送，证书包含启动安全会话所需的公钥。然后，两台计算机（客户端和服务器）将经历一个称为 `SSL/TLS` 握手的过程，即用于建立安全连接的一系列来回通信

## My WebSite How to use Https

(免费版本的 HTTPS 基本都是公用 TLS/SSL 证书)
许多网站托管提供商和其他服务提供收费的 TLS/SSL 证书。这些证书通常会在许多客户之间共享。也有更加昂贵的证书，可以单独注册到特定的 Web 资产。

所有使用 Cloudflare 的网站均通过共享证书免费获得 HTTPS（此技术术语为多域 SSL 证书）

## TLS 握手

TLS 是一种旨在保护互联网通信安全的加密和身份验证协议。TLS 握手是启动 TLS 通信会话的过程。在 TLS 握手过程中，通信双方交换消息以相互确认，彼此验证，确立它们将使用的加密算法，并生成一致的会话密钥。TLS 握手是 HTTPS 工作原理的基础部分。

<img src="https://cf-assets.www.cloudflare.com/slt3lc6tev37/5aYOr5erfyNBq20X5djTco/3c859532c91f25d961b2884bf521c1eb/tls-ssl-handshake.png" width="320px" />

### TLS VS SSL

SSL（安全套接字层）是为 HTTP 开发的原始安全协议。不久前，SSL 被 TLS （传输层安全性）所取代。SSL 握手现在称为 TLS 握手，尽管“SSL”这个名称仍在广泛使用。

### When to use TLS ?

用户导航到一个使用 HTTPS 的网站，浏览器首先开始查询网站的原始服务器，这时就会发生 TLS 握手。在任何其他通信使用 HTTPS 时（包括 API 调用和 DNS over HTTPS 查询），也会发生 TLS 握手。

通过 TCP 握手打开 TCP 连接后，将发生 TLS 握手。

### What happen when starting TLS

在 TLS 握手过程中，客户端和服务器都会执行以下操作：

- 指定将要使用的 TLS 版本（TLS 1.0、1.2、1.3 等）
- 决定将要使用哪些密码套件（见下文）
- 通过服务器的公钥和 SSL 证书颁发机构的数字签名来验证服务器的身份
- 生成会话密钥，以在握手完成后使用对称加密
